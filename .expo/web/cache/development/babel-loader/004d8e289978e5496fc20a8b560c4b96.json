{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\rickkoh\\\\Desktop\\\\git\\\\wordbin-dev\\\\node_modules\\\\react-native-material-menu\\\\src\\\\Menu.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport View from \"react-native-web/dist/exports/View\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nvar STATES = {\n  HIDDEN: 'HIDDEN',\n  ANIMATING: 'ANIMATING',\n  SHOWN: 'SHOWN'\n};\nvar EASING = Easing.bezier(0.4, 0, 0.2, 1);\nvar SCREEN_INDENT = 8;\n\nvar Menu = function (_React$Component) {\n  _inherits(Menu, _React$Component);\n\n  var _super = _createSuper(Menu);\n\n  function Menu() {\n    var _this;\n\n    _classCallCheck(this, Menu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._container = null;\n    _this.state = {\n      menuState: STATES.HIDDEN,\n      top: 0,\n      left: 0,\n      menuWidth: 0,\n      menuHeight: 0,\n      buttonWidth: 0,\n      buttonHeight: 0,\n      menuSizeAnimation: new Animated.ValueXY({\n        x: 0,\n        y: 0\n      }),\n      opacityAnimation: new Animated.Value(0)\n    };\n\n    _this._setContainerRef = function (ref) {\n      _this._container = ref;\n    };\n\n    _this._onMenuLayout = function (e) {\n      if (_this.state.menuState === STATES.ANIMATING) {\n        return;\n      }\n\n      var _e$nativeEvent$layout = e.nativeEvent.layout,\n          width = _e$nativeEvent$layout.width,\n          height = _e$nativeEvent$layout.height;\n\n      _this.setState({\n        menuState: STATES.ANIMATING,\n        menuWidth: width,\n        menuHeight: height\n      }, function () {\n        Animated.parallel([Animated.timing(_this.state.menuSizeAnimation, {\n          toValue: {\n            x: width,\n            y: height\n          },\n          duration: _this.props.animationDuration,\n          easing: EASING\n        }), Animated.timing(_this.state.opacityAnimation, {\n          toValue: 1,\n          duration: _this.props.animationDuration,\n          easing: EASING\n        })]).start();\n      });\n    };\n\n    _this._onDismiss = function () {\n      if (_this.props.onHidden) {\n        _this.props.onHidden();\n      }\n    };\n\n    _this.show = function () {\n      _this._container.measureInWindow(function (left, top, buttonWidth, buttonHeight) {\n        _this.setState({\n          buttonHeight: buttonHeight,\n          buttonWidth: buttonWidth,\n          left: left,\n          menuState: STATES.SHOWN,\n          top: top\n        });\n      });\n    };\n\n    _this.hide = function (onHidden) {\n      Animated.timing(_this.state.opacityAnimation, {\n        toValue: 0,\n        duration: _this.props.animationDuration,\n        easing: EASING\n      }).start(function () {\n        _this.setState({\n          menuState: STATES.HIDDEN,\n          menuSizeAnimation: new Animated.ValueXY({\n            x: 0,\n            y: 0\n          }),\n          opacityAnimation: new Animated.Value(0)\n        }, function () {\n          if (onHidden) {\n            onHidden();\n          }\n\n          if (Platform.OS !== 'ios' && _this.props.onHidden) {\n            _this.props.onHidden();\n          }\n        });\n      });\n    };\n\n    _this._hide = function () {\n      _this.hide();\n    };\n\n    return _this;\n  }\n\n  _createClass(Menu, [{\n    key: \"render\",\n    value: function render() {\n      var isRTL = I18nManager.isRTL;\n      var dimensions = Dimensions.get('window');\n      var windowWidth = dimensions.width;\n      var windowHeight = dimensions.height - (StatusBar.currentHeight || 0);\n      var _this$state = this.state,\n          menuSizeAnimation = _this$state.menuSizeAnimation,\n          menuWidth = _this$state.menuWidth,\n          menuHeight = _this$state.menuHeight,\n          buttonWidth = _this$state.buttonWidth,\n          buttonHeight = _this$state.buttonHeight,\n          opacityAnimation = _this$state.opacityAnimation;\n      var menuSize = {\n        width: menuSizeAnimation.x,\n        height: menuSizeAnimation.y\n      };\n      var _this$state2 = this.state,\n          left = _this$state2.left,\n          top = _this$state2.top;\n      var transforms = [];\n\n      if (isRTL && left + buttonWidth - menuWidth > SCREEN_INDENT || !isRTL && left + menuWidth > windowWidth - SCREEN_INDENT) {\n        transforms.push({\n          translateX: Animated.multiply(menuSizeAnimation.x, -1)\n        });\n        left = Math.min(windowWidth - SCREEN_INDENT, left + buttonWidth);\n      } else if (left < SCREEN_INDENT) {\n        left = SCREEN_INDENT;\n      }\n\n      if (top > windowHeight - menuHeight - SCREEN_INDENT) {\n        transforms.push({\n          translateY: Animated.multiply(menuSizeAnimation.y, -1)\n        });\n        top = windowHeight - SCREEN_INDENT;\n        top = Math.min(windowHeight - SCREEN_INDENT, top + buttonHeight);\n      } else if (top < SCREEN_INDENT) {\n        top = SCREEN_INDENT;\n      }\n\n      var shadowMenuContainerStyle = _objectSpread({\n        opacity: opacityAnimation,\n        transform: transforms,\n        top: top\n      }, isRTL ? {\n        right: left\n      } : {\n        left: left\n      });\n\n      var menuState = this.state.menuState;\n      var animationStarted = menuState === STATES.ANIMATING;\n      var modalVisible = menuState === STATES.SHOWN || animationStarted;\n      var _this$props = this.props,\n          testID = _this$props.testID,\n          button = _this$props.button,\n          style = _this$props.style,\n          children = _this$props.children;\n      return React.createElement(View, {\n        ref: this._setContainerRef,\n        collapsable: false,\n        testID: testID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, button), React.createElement(Modal, {\n        visible: modalVisible,\n        onRequestClose: this._hide,\n        supportedOrientations: ['portrait', 'portrait-upside-down', 'landscape', 'landscape-left', 'landscape-right'],\n        transparent: true,\n        onDismiss: this._onDismiss,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableWithoutFeedback, {\n        onPress: this._hide,\n        accessible: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: StyleSheet.absoluteFill,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }, React.createElement(Animated.View, {\n        onLayout: this._onMenuLayout,\n        style: [styles.shadowMenuContainer, shadowMenuContainerStyle, style],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }, React.createElement(Animated.View, {\n        style: [styles.menuContainer, animationStarted && menuSize],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }\n      }, children))))));\n    }\n  }]);\n\n  return Menu;\n}(React.Component);\n\nMenu.defaultProps = {\n  animationDuration: 300\n};\nvar styles = StyleSheet.create({\n  shadowMenuContainer: _objectSpread({\n    position: 'absolute',\n    backgroundColor: 'white',\n    borderRadius: 4,\n    opacity: 0\n  }, Platform.select({\n    ios: {\n      shadowColor: 'black',\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowOpacity: 0.14,\n      shadowRadius: 2\n    },\n    android: {\n      elevation: 8\n    }\n  })),\n  menuContainer: {\n    overflow: 'hidden'\n  }\n});\nexport default Menu;","map":{"version":3,"sources":["C:/Users/rickkoh/Desktop/git/wordbin-dev/node_modules/react-native-material-menu/src/Menu.js"],"names":["React","STATES","HIDDEN","ANIMATING","SHOWN","EASING","Easing","bezier","SCREEN_INDENT","Menu","_container","state","menuState","top","left","menuWidth","menuHeight","buttonWidth","buttonHeight","menuSizeAnimation","Animated","ValueXY","x","y","opacityAnimation","Value","_setContainerRef","ref","_onMenuLayout","e","nativeEvent","layout","width","height","setState","parallel","timing","toValue","duration","props","animationDuration","easing","start","_onDismiss","onHidden","show","measureInWindow","hide","Platform","OS","_hide","isRTL","I18nManager","dimensions","Dimensions","get","windowWidth","windowHeight","StatusBar","currentHeight","menuSize","transforms","push","translateX","multiply","Math","min","translateY","shadowMenuContainerStyle","opacity","transform","right","animationStarted","modalVisible","testID","button","style","children","StyleSheet","absoluteFill","styles","shadowMenuContainer","menuContainer","Component","defaultProps","create","position","backgroundColor","borderRadius","select","ios","shadowColor","shadowOffset","shadowOpacity","shadowRadius","android","elevation","overflow"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport {\n  Animated,\n  Dimensions,\n  Easing,\n  Modal,\n  Platform,\n  StatusBar,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  I18nManager,\n} from 'react-native';\n\nconst STATES = {\n  HIDDEN: 'HIDDEN',\n  ANIMATING: 'ANIMATING',\n  SHOWN: 'SHOWN',\n};\n\nconst EASING = Easing.bezier(0.4, 0, 0.2, 1);\nconst SCREEN_INDENT = 8;\n\nclass Menu extends React.Component {\n  _container = null;\n\n  state = {\n    menuState: STATES.HIDDEN,\n\n    top: 0,\n    left: 0,\n\n    menuWidth: 0,\n    menuHeight: 0,\n\n    buttonWidth: 0,\n    buttonHeight: 0,\n\n    menuSizeAnimation: new Animated.ValueXY({ x: 0, y: 0 }),\n    opacityAnimation: new Animated.Value(0),\n  };\n\n  _setContainerRef = ref => {\n    this._container = ref;\n  };\n\n  // Start menu animation\n  _onMenuLayout = e => {\n    if (this.state.menuState === STATES.ANIMATING) {\n      return;\n    }\n\n    const { width, height } = e.nativeEvent.layout;\n\n    this.setState(\n      {\n        menuState: STATES.ANIMATING,\n        menuWidth: width,\n        menuHeight: height,\n      },\n      () => {\n        Animated.parallel([\n          Animated.timing(this.state.menuSizeAnimation, {\n            toValue: { x: width, y: height },\n            duration: this.props.animationDuration,\n            easing: EASING,\n          }),\n          Animated.timing(this.state.opacityAnimation, {\n            toValue: 1,\n            duration: this.props.animationDuration,\n            easing: EASING,\n          }),\n        ]).start();\n      },\n    );\n  };\n\n  _onDismiss = () => {\n    if (this.props.onHidden) {\n      this.props.onHidden();\n    }\n  };\n\n  show = () => {\n    this._container.measureInWindow((left, top, buttonWidth, buttonHeight) => {\n      this.setState({\n        buttonHeight,\n        buttonWidth,\n        left,\n        menuState: STATES.SHOWN,\n        top,\n      });\n    });\n  };\n\n  hide = onHidden => {\n    Animated.timing(this.state.opacityAnimation, {\n      toValue: 0,\n      duration: this.props.animationDuration,\n      easing: EASING,\n    }).start(() => {\n      // Reset state\n      this.setState(\n        {\n          menuState: STATES.HIDDEN,\n          menuSizeAnimation: new Animated.ValueXY({ x: 0, y: 0 }),\n          opacityAnimation: new Animated.Value(0),\n        },\n        () => {\n          if (onHidden) {\n            onHidden();\n          }\n\n          // Invoke onHidden callback if defined\n          if (Platform.OS !== 'ios' && this.props.onHidden) {\n            this.props.onHidden();\n          }\n        },\n      );\n    });\n  };\n\n  // @@ TODO: Rework this\n  _hide = () => {\n    this.hide();\n  };\n\n  render() {\n    const { isRTL } = I18nManager;\n\n    const dimensions = Dimensions.get('window');\n    const { width: windowWidth } = dimensions;\n    const windowHeight = dimensions.height - (StatusBar.currentHeight || 0);\n\n    const {\n      menuSizeAnimation,\n      menuWidth,\n      menuHeight,\n      buttonWidth,\n      buttonHeight,\n      opacityAnimation,\n    } = this.state;\n    const menuSize = {\n      width: menuSizeAnimation.x,\n      height: menuSizeAnimation.y,\n    };\n\n    // Adjust position of menu\n    let { left, top } = this.state;\n    const transforms = [];\n\n    if (\n      (isRTL && left + buttonWidth - menuWidth > SCREEN_INDENT) ||\n      (!isRTL && left + menuWidth > windowWidth - SCREEN_INDENT)\n    ) {\n      transforms.push({\n        translateX: Animated.multiply(menuSizeAnimation.x, -1),\n      });\n\n      left = Math.min(windowWidth - SCREEN_INDENT, left + buttonWidth);\n    } else if (left < SCREEN_INDENT) {\n      left = SCREEN_INDENT;\n    }\n\n    // Flip by Y axis if menu hits bottom screen border\n    if (top > windowHeight - menuHeight - SCREEN_INDENT) {\n      transforms.push({\n        translateY: Animated.multiply(menuSizeAnimation.y, -1),\n      });\n\n      top = windowHeight - SCREEN_INDENT;\n      top = Math.min(windowHeight - SCREEN_INDENT, top + buttonHeight);\n    } else if (top < SCREEN_INDENT) {\n      top = SCREEN_INDENT;\n    }\n\n    const shadowMenuContainerStyle = {\n      opacity: opacityAnimation,\n      transform: transforms,\n      top,\n\n      // Switch left to right for rtl devices\n      ...(isRTL ? { right: left } : { left }),\n    };\n\n    const { menuState } = this.state;\n    const animationStarted = menuState === STATES.ANIMATING;\n    const modalVisible = menuState === STATES.SHOWN || animationStarted;\n\n    const { testID, button, style, children } = this.props;\n\n    return (\n      <View ref={this._setContainerRef} collapsable={false} testID={testID}>\n        <View>{button}</View>\n\n        <Modal\n          visible={modalVisible}\n          onRequestClose={this._hide}\n          supportedOrientations={[\n            'portrait',\n            'portrait-upside-down',\n            'landscape',\n            'landscape-left',\n            'landscape-right',\n          ]}\n          transparent\n          onDismiss={this._onDismiss}\n        >\n          <TouchableWithoutFeedback onPress={this._hide} accessible={false}>\n            <View style={StyleSheet.absoluteFill}>\n              <Animated.View\n                onLayout={this._onMenuLayout}\n                style={[\n                  styles.shadowMenuContainer,\n                  shadowMenuContainerStyle,\n                  style,\n                ]}\n              >\n                <Animated.View\n                  style={[styles.menuContainer, animationStarted && menuSize]}\n                >\n                  {children}\n                </Animated.View>\n              </Animated.View>\n            </View>\n          </TouchableWithoutFeedback>\n        </Modal>\n      </View>\n    );\n  }\n}\n\nMenu.defaultProps = {\n  animationDuration: 300,\n};\n\nconst styles = StyleSheet.create({\n  shadowMenuContainer: {\n    position: 'absolute',\n    backgroundColor: 'white',\n    borderRadius: 4,\n    opacity: 0,\n\n    // Shadow\n    ...Platform.select({\n      ios: {\n        shadowColor: 'black',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.14,\n        shadowRadius: 2,\n      },\n      android: {\n        elevation: 8,\n      },\n    }),\n  },\n  menuContainer: {\n    overflow: 'hidden',\n  },\n});\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}